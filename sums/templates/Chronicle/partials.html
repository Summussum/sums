{% block chronicle %}
<div class="centered" id="chronicle">
    <h3 class="centered">Chronicle</h3>
    <p>Select a budget category below to assign the following entry:</p>
    <table class="center_table">
        <tr>
            <th>Date</th>
            <th>Amount</th>
            <th>Description</th>
            <th>Account</th>
            <th>Recurring</th>
            <th>Note</th>
            <th>Category</th>
        </tr>
        <tr id="chronicle_target">
            <td>{{target.transaction_date}}</td>
            <td>{{target.amount}}</td>
            <td>{{target.transaction_description}}</td>
            <td>{{target.recurring}}</td>
            <td>{{target.note}}</td>
            <td>{{target.budget_id}}</td>
        </tr>
    </table>

    <br>
    {% for option in options %}
        <button hx-post="/chronicler/assign/" value="{{option.category_name}}" hx-target="#chronicle" name="category_name">{{option.category_display}}</button>
    {% endfor %}
    <br>
    <h3 class="centered">Chronicle History</h3>
    <table class="center_table">
        <tr>
            <th>Date</th>
            <th>Amount</th>
            <th>Description</th>
            <th>Account</th>
            <th>Recurring</th>
            <th>Note</th>
            <th>Category</th>
            <th>Edit</th>
        </tr>
        {% for entry in chronicle_history %}
        <tr id="id{{entry.transaction_id}}">
            <td>{{entry.transaction_date}}</td>
            <td>{{entry.amount}}</td>
            <td>{{entry.transaction_description}}</td>
            <td>{{entry.account_nickname}}</td>
            <td>{{entry.recurring}}</td>
            <td>{{entry.note}}</td>
            <td>{{entry.category_name}}</td>
            <td>
                <select name="category_name" hx-trigger="change" hx-post="/chronicler/edit/{{entry.transaction_id}}" hx-target="#id{{entry.transaction_id}}" hx-swap="outerHTML" hx-include="#id{{entry.transaction_id}}">
                    <option value="{{entry.category_name}}">{{entry.category_name}}</option>
                    <option value="None">None</option>
                    {% for option in options %}
                        <option value="{{option.category_name}}">{{option.category_name}}</option>
                    {% endfor %}
                </select>
            </td>
        </tr> 
        {% endfor %}
    </table>
</div>
{% endblock %}

{% block chronicle_line %}
<tr id="id{{entry.transaction_id}}">
    <td>{{entry.transaction_date}}</td>
    <td>{{entry.amount}}</td>
    <td>{{entry.transaction_description}}</td>
    <td>{{entry.account_nickname}}</td>
    <td>{{entry.recurring}}</td>
    <td>{{entry.note}}</td>
    <td>{{entry.category_name}}</td>
    <td>
        <select name="category_name" hx-trigger="change" hx-post="/chronicler/edit/{{entry.transaction_id}}" hx-target="#id{{entry.transaction_id}}" hx-swap="outerHTML" hx-include="#id{{entry.transaction_id}}">
            <option value="{{entry.category_name}}">{{entry.category_name}}</option>
            <option value="None">None</option>
            {% for option in options %}
                <option value="{{option.category_name}}">{{option.category_name}}</option>
            {% endfor %}
        </select>
    </td>
</tr>
{% endblock %}



{% block complete %}
<div class="centered" id="chronicle">
    <h3 class="centered">Chronicle</h3>
    <p style="font-weight: bold;">There are no more uncategorized transactions. Congratulations!</p>
    <br>
    <p>If you wish to review current transactions, please check the <a href="/explorer/">Explorer</a> page.</p>    <br>
    <br><br>
    <table class="center_table">
        <tr>
            <th>Date</th>
            <th>Amount</th>
            <th>Description</th>
            <th>Account</th>
            <th>Recurring</th>
            <th>Note</th>
            <th>Category</th>
            <th>Edit</th>
        </tr>
        {% for entry in chronicle_history %}
        <tr id="id{{entry.transaction_id}}">
            <td>{{entry.transaction_date}}</td>
            <td>{{entry.amount}}</td>
            <td>{{entry.transaction_description}}</td>
            <td>{{entry.account_nickname}}</td>
            <td>{{entry.recurring}}</td>
            <td>{{entry.note}}</td>
            <td>{{entry.category_name}}</td>
            <td>
                <select name="category_name" hx-trigger="change" hx-post="/chronicler/edit/{{entry.transaction_id}}" hx-target="#id{{entry.transaction_id}}" hx-swap="outerHTML" hx-include="#id{{entry.transaction_id}}">
                    <option value="{{entry.category_name}}">{{entry.category_name}}</option>
                    <option value="None">None</option>
                    {% for option in options %}
                        <option value="{{option.category_name}}">{{option.category_name}}</option>
                    {% endfor %}
                </select>
            </td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}